# Project GenCode Backend - Function Analysis

Total Functions: 795

## Module: `agents\sub_agents.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 31 | `_broadcast_agent_thinking` | Broadcast agent thinking to the frontend Terminal. | 3 | agents\sub_agents.py |
| 56 | `_llm_generate_tests` | Ask LLM to generate tests given the current project files. | 1 | agents\sub_agents.py |
| 155 | `_write_tests_to_workspace` | Persist generated tests into workspace and return list of written paths. | 1 | agents\sub_agents.py |
| 171 | `_run_pytest` | Run pytest programmatically via async subprocess. | 1 | agents\sub_agents.py |
| 214 | `_run_playwright` | Try to run playwright tests via CLI 'playwright test' (async). | 1 | agents\sub_agents.py |
| 254 | `run_sub_agent` | Generic runner for a sub-agent: | 0 | - |
| 355 | `marcus_call_sub_agent` | Marcus uses this to call Derek/Luna/Victoria for code generation. | 0 | - |

## Module: `api\agents.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 13 | `get_agents_status` | Get status of all agents. | 0 | - |
| 42 | `get_active_workflows` | Get list of active workflows. | 0 | - |

## Module: `api\deployment.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 39 | `initialize_deployment` | Initialize a new deployment. | 0 | - |
| 67 | `start_deployment` | Start one-click deployment. | 0 | - |
| 95 | `get_deployment_status` | Get deployment status. | 0 | - |
| 118 | `get_deployment_history` | Get deployment history. | 0 | - |
| 137 | `rollback_deployment` | Rollback to previous version. | 0 | - |
| 152 | `update_env_vars` | Update environment variables. | 0 | - |
| 169 | `get_env_vars` | Get environment variables. | 0 | - |
| 179 | `setup_custom_domain` | Setup custom domain. | 0 | - |
| 197 | `get_deployment_logs` | Get deployment logs. | 0 | - |
| 209 | `download_logs` | Download deployment logs as file. | 0 | - |
| 221 | `restart_deployment` | Restart deployment. | 0 | - |
| 232 | `get_deployment_metrics` | Get deployment metrics. | 0 | - |
| 243 | `get_container_health` | Get container health status. | 0 | - |

## Module: `api\health.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 12 | `healthz` | Simple health check. | 0 | - |
| 18 | `api_health` | API health check. | 0 | - |

## Module: `api\projects.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 40 | `create_project` | Create a new project.  | 0 | - |
| 129 | `list_projects` | List all projects. | 0 | - |
| 179 | `get_project` | Get project details. | 0 | - |
| 226 | `delete_project` | Delete a project. | 0 | - |

## Module: `api\providers.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 21 | `list_providers` | List available LLM providers. | 0 | - |
| 54 | `get_available_providers` | Get list of available providers (those with API keys configured). | 0 | - |
| 98 | `get_current_provider` | Get current default provider and model. | 0 | - |
| 116 | `set_provider` | Set the current provider and model. | 0 | - |

## Module: `api\sandbox.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 20 | `sandbox_exec` | Execute command in sandbox. | 0 | - |
| 38 | `get_sandbox_status` | Get sandbox status for a project. | 0 | - |
| 51 | `create_sandbox` | Create/initialize sandbox for a project (idempotent). | 0 | - |
| 74 | `start_sandbox` | Start sandbox for a project. | 0 | - |
| 87 | `stop_sandbox` | Stop sandbox for a project. | 0 | - |
| 100 | `get_preview_url` | Get preview URL for a project sandbox. | 0 | - |

## Module: `api\tracking.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 16 | `health` | Health check for tracking service. | 0 | - |
| 22 | `get_project_costs` | Get cost/token usage data for a project. | 0 | - |
| 38 | `get_project_budget` | Get budget status for a project. | 0 | - |
| 52 | `list_tracked_projects` | List all projects with budget tracking. | 0 | - |

## Module: `api\workspace.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 29 | `validate_project_id` | Validate project_id format to prevent path traversal attacks. | 4 | api\workspace.py |
| 39 | `get_safe_project_path` | Get project path with security validation. | 3 | api\workspace.py |
| 78 | `list_workspaces` | List all workspaces (for connection test). | 0 | - |
| 92 | `get_workspace_files` | Get workspace file tree. | 0 | - |
| 128 | `get_file_content` | Get file content. | 0 | - |
| 158 | `save_file_content` | Save file content. | 0 | - |
| 182 | `generate_backend` | Start backend generation workflow. | 0 | - |
| 301 | `resume_workflow_endpoint` | Resume a paused workflow OR start a refine workflow for completed projects. | 0 | - |
| 402 | `apply_instruction` | Apply an instruction to modify project files. | 0 | - |
| 415 | `force_reset_workflow` | Force reset workflow state for a project. | 0 | - |
| 433 | `get_project_progress` | Get workflow progress for a project. | 0 | - |
| 471 | `clear_project_progress` | Clear all saved progress for a project. | 0 | - |

## Module: `arbormind\evolution.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 67 | `ArborMindEvolution.__init__` | No description available | 0 | - |
| 72 | `ArborMindEvolution.v_store` | No description available | 0 | - |
| 77 | `ArborMindEvolution.evolve_options` | Apply evolution to a list of options before routing. | 1 | arbormind\router.py |
| 111 | `ArborMindEvolution._enhance_from_patterns` | Enhance options with insights from successful patterns. | 1 | arbormind\evolution.py |
| 171 | `ArborMindEvolution._apply_failure_warnings` | Apply warnings and confidence adjustments from failure history. | 1 | arbormind\evolution.py |
| 305 | `ArborMindEvolution.start_tracking` | Start tracking a routing decision. | 1 | arbormind\router.py |
| 352 | `ArborMindEvolution.complete_tracking` | Complete tracking by recording the outcome. | 0 | - |
| 398 | `ArborMindEvolution._record_to_pattern_store` | Cross-record successful patterns for redundancy. | 1 | arbormind\evolution.py |
| 414 | `ArborMindEvolution._record_to_failure_store` | Cross-record failures for anti-pattern learning. | 1 | arbormind\evolution.py |
| 430 | `ArborMindEvolution.get_stats` | Get evolution statistics. | 1 | arbormind\evolution.py |
| 455 | `get_evolution_manager` | Get the global ArborMind evolution manager. | 5 | arbormind\evolution.py, arbormind\router.py |
| 467 | `evolve_before_routing` | Called by router BEFORE making a decision. | 0 | - |
| 479 | `track_routing_decision` | Called by router AFTER making a decision. | 0 | - |
| 497 | `report_routing_outcome` | Called when the outcome of a routing decision is known. | 0 | - |
| 512 | `get_evolution_stats` | Get overall evolution statistics. | 0 | - |

## Module: `arbormind\explorer.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 21 | `arbormind_explore` | E-AM: Inject patterns from foreign archetypes. | 1 | orchestration\error_router.py |
| 116 | `_search_foreign_patterns` | Search for patterns in the V-vector store, excluding current archetype. | 1 | arbormind\explorer.py |
| 149 | `_get_error_embedding` | Get embedding for error text. | 1 | arbormind\explorer.py |
| 163 | `select_best_foreign_pattern` | Select the single best foreign pattern based on weights and compatibility. | 0 | - |
| 202 | `get_archetype_hints_for_error` | Get suggested archetypes that often have solutions for this error type. | 0 | - |

## Module: `arbormind\metrics_collector.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 29 | `init_metrics_db` | Initialize the metrics database tables if they don't exist. | 1 | main.py |
| 130 | `get_db_connection` | No description available | 8 | arbormind\metrics_collector.py |
| 137 | `start_pipeline_run` | Start tracking a new pipeline run. Returns run_id. | 1 | orchestration\fast_orchestrator.py |
| 156 | `complete_pipeline_run` | Mark a pipeline run as complete. | 2 | orchestration\fast_orchestrator.py |
| 183 | `start_step` | (Optional) Log step start - mainly for real-time dashboards. | 1 | orchestration\fast_orchestrator.py |
| 187 | `complete_step` | Record the outcome of a single step. | 3 | orchestration\fast_orchestrator.py |
| 220 | `record_arbormind_metrics` | Record ArborMind routing decision metrics to the metrics database. | 0 | - |
| 234 | `report_routing_outcome_db` | Update a routing decision with its outcome. | 0 | - |
| 254 | `store_classification_decision` | Store a classification decision for Marcus's learning. | 1 | handlers\contracts.py |
| 291 | `get_successful_classification_examples` | Retrieve successful classification examples for Marcus to learn from. | 1 | handlers\contracts.py |
| 337 | `get_classification_accuracy_stats` | Get overall classification accuracy statistics. | 1 | handlers\contracts.py |

## Module: `arbormind\router.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 129 | `_load_persistent_cache` | Load embeddings from disk on startup. | 1 | arbormind\router.py |
| 143 | `_save_persistent_cache_entry` | Append a single entry to disk (simple append-only log or rewrite). | 1 | arbormind\router.py |
| 168 | `_get_http_session` | Get or create shared HTTP session for connection pooling. | 2 | arbormind\router.py |
| 179 | `close_http_session` | Close the shared HTTP session. Call during app shutdown. | 1 | main.py |
| 187 | `_cache_get` | Get from cache if exists. | 1 | arbormind\router.py |
| 197 | `_cache_set` | Set cache and persist. | 1 | arbormind\router.py |
| 208 | `get_embedding` | Get text embedding using the configured LLM provider. | 3 | arbormind\explorer.py, arbormind\router.py |
| 249 | `_get_gemini_embedding` | Get embedding from Google Gemini API. | 1 | arbormind\router.py |
| 280 | `_get_openai_embedding` | Get embedding from OpenAI API. | 1 | arbormind\router.py |
| 313 | `_get_fallback_embedding` | Fallback embedding using simple hash-based approach. | 2 | arbormind\router.py |
| 334 | `softmax` | Numerically stable softmax implementation. | 1 | arbormind\router.py |
| 351 | `scaled_dot_product_attention` | Compute scaled dot-product attention. | 0 | - |
| 396 | `_l2_normalize` | L2 normalize vectors along specified axis. | 2 | arbormind\router.py |
| 402 | `_softmax_am` | Numerically stable softmax for AM operations. | 1 | arbormind\router.py |
| 409 | `arbormind_attention` | Universal Attention operator supporting AM creative modes. | 3 | arbormind\explorer.py, arbormind\router.py |
| 476 | `arbormind_blend` | Domain-general V-value synthesis for AM. | 2 | arbormind\explorer.py, arbormind\router.py |
| 525 | `should_use_combinational_mode` | Determine if combinational mode should be used based on entropy. | 1 | arbormind\router.py |
| 558 | `ArborMindRouter.__init__` | No description available | 0 | - |
| 562 | `ArborMindRouter._get_evolution_manager` | Lazy load evolution manager to avoid circular imports. | 1 | arbormind\router.py |
| 572 | `ArborMindRouter.route` | Route a query to the best matching options using Global Attention. | 4 | arbormind\router.py, supervision\supervisor.py |
| 791 | `ArborMindRouter._fallback_response` | Return a safe fallback response. | 2 | arbormind\router.py |
| 803 | `ArborMindRouter._log_decision` | Visual logging of the attention distribution and parameters. | 1 | arbormind\router.py |
| 828 | `compute_archetype_routing` | Route to project archetype using the Universal Router. | 0 | - |
| 844 | `compute_ui_vibe_routing` | Route to UI vibe using the Universal Router. | 0 | - |
| 860 | `arbormind_route` | ArborMind Route - Primary routing function. | 1 | orchestration\error_router.py |

## Module: `arbormind\t_am_operators.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 6 | `TAMOperator.__init__` | No description available | 0 | - |
| 10 | `TAMOperator.apply` | No description available | 1 | orchestration\healing_pipeline.py |
| 13 | `_invert_strict_mode` | Strategy: Relax constraints to allow partial success. | 0 | - |
| 31 | `build_default_tam_operators` | Build the default set of T-AM mutation operators. | 1 | orchestration\healing_pipeline.py |

## Module: `arbormind\v_value_schema.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 13 | `VValue.from_dict` | No description available | 3 | orchestration\healing_pipeline.py, utils\entity_discovery.py |
| 16 | `VValue.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 19 | `VValue.get` | No description available | 707 | agents\sub_agents.py, api\agents.py (+81 more) |
| 22 | `VValue.set` | No description available | 5 | arbormind\t_am_operators.py, lib\monitoring.py (+1 more) |

## Module: `core\arbormind_paths.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 36 | `get_arbormind_storage_dir` | Get the ArborMind storage directory. | 0 | - |
| 41 | `get_v_vector_db_path` | Get the V-Vector database path. | 0 | - |
| 46 | `get_metrics_db_path` | Get the metrics database path. | 0 | - |

## Module: `core\config.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 129 | `Settings.ensure_directories` | Ensure required directories exist. | 0 | - |

## Module: `core\exceptions.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 10 | `GenCodeError.__init__` | No description available | 0 | - |
| 23 | `QualityGateError.__init__` | No description available | 0 | - |
| 35 | `AgentError.__init__` | No description available | 0 | - |
| 46 | `LLMError.__init__` | No description available | 0 | - |
| 56 | `RateLimitError.__init__` | No description available | 0 | - |
| 67 | `SandboxError.__init__` | No description available | 0 | - |
| 77 | `PersistenceError.__init__` | No description available | 0 | - |

## Module: `core\failure_boundary.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 33 | `FailureBoundary.enforce` | Decorator that catches all failures and classifies them. | 0 | - |
| 127 | `LegacyStepResultConverter.convert` | Convert legacy StepResult to new StepExecutionResult. | 0 | - |

## Module: `core\integration.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 55 | `IntegrationManager.__init__` | Initialize integration manager for a project | 0 | - |
| 60 | `IntegrationManager._load_config` | Load configuration from environment and defaults | 1 | core\integration.py |
| 73 | `IntegrationManager.is_feature_enabled` | Check if a specific feature is enabled. | 6 | core\integration.py |
| 87 | `IntegrationManager.get_memory_db_path` | No description available | 1 | core\integration.py |
| 90 | `IntegrationManager.get_max_workflow_turns` | No description available | 1 | core\integration.py |
| 93 | `IntegrationManager.get_max_test_retries` | No description available | 1 | core\integration.py |
| 96 | `IntegrationManager.validate_api_keys` | Validate that required API keys are configured. | 1 | core\integration.py |
| 117 | `IntegrationManager.get_config_summary` | Get summary of current configuration. | 1 | core\integration.py |
| 139 | `create_integration_manager` | No description available | 0 | - |
| 143 | `validate_environment` | Validate that the environment is properly configured. | 0 | - |

## Module: `core\logging.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 5 | `log` | Unified logging function for GenCode Studio. | 752 | agents\sub_agents.py, api\projects.py (+49 more) |
| 29 | `log_section` | Log a section header with visual separator. | 2 | supervision\supervisor.py |
| 43 | `log_thinking` | Log agent thinking/reasoning with proper formatting. | 0 | - |
| 61 | `log_files` | Log file list summary. | 2 | agents\sub_agents.py, supervision\supervisor.py |
| 80 | `log_result` | Log review result with quality score. | 1 | supervision\supervisor.py |

## Module: `core\step_outcome.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 34 | `StepExecutionResult.is_successful` | Only SUCCESS counts as success. | 0 | - |
| 38 | `StepExecutionResult.requires_healing` | Only COGNITIVE_FAILURE triggers healing. | 0 | - |
| 42 | `StepExecutionResult.is_dead_branch` | Isolated steps are dead branches. | 0 | - |
| 46 | `StepExecutionResult.is_hard_failure` | HARD_FAILURE is a global truth (ignores isolation). | 0 | - |

## Module: `core\types.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 26 | `GeneratedFile.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 39 | `AgentOutput.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 81 | `TokenUsage.total` | No description available | 0 | - |
| 85 | `TokenUsage.estimated_cost` | Estimate cost based on Gemini pricing. | 0 | - |

## Module: `db\__init__.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 14 | `connect_db` | Connect to MongoDB. | 0 | - |
| 60 | `disconnect_db` | Disconnect from MongoDB. | 0 | - |
| 68 | `get_db` | Get database instance. | 0 | - |
| 78 | `is_connected` | Check if database is connected. | 0 | - |
| 83 | `get_connection_error` | Get connection error message if connection failed. | 0 | - |
| 88 | `get_collection` | Get a collection by name. | 0 | - |

## Module: `handlers\analysis.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 30 | `_detect_primary_entity` | Detect primary entity from user request. | 2 | handlers\analysis.py |
| 43 | `step_analysis` | Step 1: Marcus analyzes the user request. | 0 | - |

## Module: `handlers\archetype_guidance.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 500 | `get_archetype_guidance` | Get UI guidance for a specific archetype. | 1 | handlers\archetype_guidance.py |
| 528 | `get_archetype_pages` | Get additional pages recommended for this archetype. | 1 | handlers\archetype_guidance.py |
| 534 | `get_archetype_components` | Get key components recommended for this archetype. | 1 | handlers\archetype_guidance.py |
| 540 | `get_full_archetype_context` | Get complete archetype context for frontend mock generation. | 2 | handlers\archetype_guidance.py, handlers\frontend_mock.py |
| 946 | `get_backend_archetype_guidance` | Get backend API guidance for a specific archetype. | 1 | handlers\archetype_guidance.py |
| 987 | `get_full_backend_context` | Get complete archetype context for backend implementation. | 2 | handlers\archetype_guidance.py, handlers\backend.py |
| 1219 | `get_architecture_archetype_guidance` | Get architecture guidance for a specific archetype. | 2 | handlers\archetype_guidance.py, handlers\architecture.py |
| 1267 | `get_archetype_patterns_from_store` | Retrieve learned patterns from PatternStore for this archetype. | 3 | handlers\archetype_guidance.py, handlers\backend.py (+1 more) |
| 1321 | `get_enhanced_prompt_context` | Get complete enhanced context for any step. | 0 | - |
| 1774 | `get_e2e_testing_guidance` | Get E2E testing guidance for a specific archetype. | 2 | handlers\archetype_guidance.py, handlers\testing_frontend.py |

## Module: `handlers\architecture.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 33 | `step_architecture` | Step 2: Victoria creates architecture plan with Marcus supervision. | 0 | - |

## Module: `handlers\backend.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 43 | `ensure_workspace_app_package` | Ensure the generated backend's `app` directory is a proper package: | 1 | handlers\backend.py |
| 61 | `step_backend_implementation` | Step 6: Backend Implementation (Models + Routers). | 0 | - |
| 105 | `_step_backend_multi_entity` | Multi-entity backend implementation. | 1 | handlers\backend.py |
| 287 | `_step_backend_single_entity` | Single-entity atomic backend implementation (LEGACY MODE). | 1 | handlers\backend.py |
| 568 | `_build_single_router_prompt` | Build prompt for generating a single entity's router. | 1 | handlers\backend.py |
| 690 | `_extract_entity_contract` | Extract the entity-specific section from contracts.md. | 1 | handlers\backend.py |
| 741 | `step_system_integration` | Step 7: System Integration (Script). | 0 | - |

## Module: `handlers\backend_models.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 26 | `step_backend_models` | Step: Backend Models - Generate all models at once. | 1 | handlers\backend.py |
| 166 | `derek_generate_model_spec` | Derek generates model specifications as JSON (not Python code). | 1 | handlers\backend_models.py |
| 341 | `merge_model_specs_to_python` | Convert JSON model spec to Python SQLModel/Pydantic code. | 1 | handlers\backend_models.py |

## Module: `handlers\base.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 12 | `_get_broadcast_to_project` | Lazy import to avoid circular dependency with app.workflow package. | 2 | handlers\base.py |
| 21 | `broadcast_status` | Broadcast workflow status update. | 13 | handlers\analysis.py, handlers\architecture.py (+10 more) |
| 47 | `broadcast_agent_log` | Broadcast an agent log/thinking message. | 16 | handlers\analysis.py, handlers\backend.py (+5 more) |

## Module: `handlers\contracts.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 42 | `step_contracts` | Step 5: Marcus creates API contracts AFTER the frontend mock is built. | 0 | - |
| 451 | `_parse_marcus_classification` | Parse Marcus's entity classification section from contracts.md. | 1 | handlers\contracts.py |
| 485 | `_calculate_classification_confidence` | Calculate how accurate Marcus was compared to code-based classification. | 1 | handlers\contracts.py |
| 542 | `_generate_entity_plan_from_contracts` | Auto-generate entity_plan.json by parsing contracts.md. | 1 | handlers\contracts.py |
| 761 | `_remove_embedded_from_contracts` | FIX #4: Remove endpoint sections for EMBEDDED entities from contracts.md. | 1 | handlers\contracts.py |

## Module: `handlers\frontend_integration.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 42 | `cleanup_unused_components` | Remove unused Shadcn UI components to reduce bloat. | 1 | handlers\frontend_integration.py |
| 125 | `step_frontend_integration` | Step 9: Derek replaces mock data with real API calls. | 0 | - |

## Module: `handlers\frontend_mock.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 44 | `step_frontend_mock` | Step 3: Derek generates frontend with MOCK DATA first. | 0 | - |

## Module: `handlers\preview.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 25 | `step_preview_final` | Step 11: Refresh preview on RANDOM free ports for both frontend and backend. | 0 | - |

## Module: `handlers\refine.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 30 | `step_refine` | Refine Mode - Conversational Iteration (post-workflow). | 0 | - |

## Module: `handlers\screenshot_verify.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 28 | `step_screenshot_verify` | Step 4: Visual QA after frontend mock is created. | 0 | - |

## Module: `handlers\testing_backend.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 62 | `render_contract_tests` | Render the template deterministically. | 1 | handlers\testing_backend.py |
| 99 | `_generate_tests_from_template` | Generate backend tests from template at the START of testing step. | 1 | handlers\testing_backend.py |
| 231 | `_fallback_generate_tests` | Fallback test generation when Derek fails (Option B supplement). | 1 | handlers\testing_backend.py |
| 274 | `step_testing_backend` | MASTER LOOP: Derek tests backend using sandbox with healing. | 0 | - |

## Module: `handlers\testing_frontend.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 44 | `ensure_str` | Ensure value is a string (sandboxexec may return bytes). | 6 | handlers\testing_frontend.py |
| 53 | `_generate_frontend_tests_from_template` | Generate frontend E2E tests from template at the START of testing step. | 1 | handlers\testing_frontend.py |
| 210 | `_fallback_generate_frontend_tests` | Fallback test generation when Luna fails. | 1 | handlers\testing_frontend.py |
| 268 | `step_testing_frontend` | Step 11: Luna tests frontend with Playwright and Self-Healing. | 0 | - |

## Module: `learning\failure_store.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 43 | `FailureStore.__init__` | No description available | 0 | - |
| 49 | `FailureStore._init_db` | Initialize the SQLite database. | 4 | learning\failure_store.py, learning\pattern_store.py (+2 more) |
| 78 | `FailureStore.record_failure` | Record a failure. If a similar failure exists, increment its count. | 5 | agents\sub_agents.py, arbormind\evolution.py (+1 more) |
| 133 | `FailureStore.retrieve_relevant_failures` | Get similar failures to warn the agent before they start. | 3 | arbormind\evolution.py, learning\failure_store.py |
| 174 | `FailureStore.get_anti_pattern_context` | Generate a 'KNOWN PITFALLS' string for the system prompt. | 1 | llm\prompt_management.py |
| 202 | `get_failure_store` | No description available | 7 | agents\sub_agents.py, arbormind\evolution.py (+2 more) |

## Module: `learning\pattern_store.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 53 | `PatternStore.__init__` | No description available | 0 | - |
| 59 | `PatternStore._init_db` | Initialize the SQLite database. | 4 | learning\failure_store.py, learning\pattern_store.py (+2 more) |
| 86 | `PatternStore.store_success` | Store a successful pattern for future reference. | 2 | arbormind\evolution.py, learning\pattern_store.py |
| 184 | `PatternStore.retrieve_patterns` | Retrieve successful patterns for a given archetype and step. | 3 | arbormind\evolution.py, handlers\archetype_guidance.py (+1 more) |
| 238 | `PatternStore.get_prompt_enhancement` | Get a prompt enhancement based on learned patterns. | 1 | learning\pattern_store.py |
| 283 | `PatternStore.get_stats` | Get learning statistics. | 1 | arbormind\evolution.py |
| 308 | `PatternStore._generate_pattern_id` | Generate a unique pattern ID. | 2 | learning\pattern_store.py |
| 313 | `PatternStore._extract_imports` | Extract import statements from code. | 1 | learning\pattern_store.py |
| 332 | `PatternStore.penalize_pattern` | Retroactively penalize a pattern if it led to a failure later. | 1 | agents\sub_agents.py |
| 390 | `get_pattern_store` | Get the global pattern store instance. | 7 | agents\sub_agents.py, arbormind\evolution.py (+2 more) |
| 405 | `learn_from_success` | Convenience function to store successful patterns. | 0 | - |
| 418 | `get_learned_enhancement` | Get prompt enhancement from learned patterns. | 0 | - |

## Module: `learning\v_vector_store.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 67 | `VVectorStore.__init__` | No description available | 0 | - |
| 73 | `VVectorStore._init_db` | Initialize the SQLite database. | 4 | learning\failure_store.py, learning\pattern_store.py (+2 more) |
| 123 | `VVectorStore.record_decision` | Record a routing decision for future learning. | 0 | - |
| 180 | `VVectorStore.record_outcome` | Record the outcome of a routing decision. | 0 | - |
| 220 | `VVectorStore._update_evolved_vector` | Update the evolved V-vector based on the new outcome. | 1 | learning\v_vector_store.py |
| 313 | `VVectorStore.get_evolved_vector` | Get the evolved V-vector for a specific context. | 1 | learning\v_vector_store.py |
| 358 | `VVectorStore.get_adjustment_for_options` | Adjust a list of options based on learned V-vectors. | 0 | - |
| 426 | `VVectorStore.get_learning_stats` | Get statistics about the learning system. | 1 | arbormind\evolution.py |
| 463 | `VVectorStore.get_anti_patterns_for_context` | Get configurations that consistently failed for a context. | 2 | arbormind\evolution.py, arbormind\explorer.py |
| 502 | `VVectorStore._seed_evolved_vector` | Directly seed an evolved V-vector (for pre-training from GitHub). | 0 | - |
| 602 | `VVectorStore.search_patterns` | Search for successful patterns in foreign archetypes. | 1 | arbormind\explorer.py |
| 666 | `get_v_vector_store` | Get the global V-vector store instance. | 5 | arbormind\evolution.py, arbormind\explorer.py (+1 more) |
| 675 | `record_routing_decision` | Convenience function to record a routing decision. | 1 | arbormind\evolution.py |
| 690 | `record_decision_outcome` | Convenience function to record outcome. | 1 | arbormind\evolution.py |
| 702 | `get_evolved_options` | Convenience function to get evolved options. | 1 | arbormind\evolution.py |

## Module: `lib\monitoring.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 18 | `set_active_preview_servers` | Sets the value of the active preview servers gauge. | 0 | - |
| 22 | `register_monitoring` | Registers Prometheus monitoring on the FastAPI app. | 1 | main.py |

## Module: `lib\secrets.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 22 | `encrypt_secret` | Encrypts a plaintext secret using AES-256-GCM. | 0 | - |
| 59 | `decrypt_secret` | Decrypts an AES-256-GCM encrypted secret. | 0 | - |
| 92 | `fetch_vault_secret` | Fetches a single secret from Vault using its v1 kv API. | 1 | lib\secrets.py |
| 116 | `load_secrets_from_vault` | Load a mapping of env names to Vault secret paths | 0 | - |

## Module: `lib\websocket.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 15 | `ConnectionManager.__init__` | No description available | 0 | - |
| 21 | `ConnectionManager.connect` | No description available | 1 | main.py |
| 28 | `ConnectionManager.disconnect` | Thread-safe disconnect. | 2 | lib\websocket.py, main.py |
| 37 | `ConnectionManager.send_json` | No description available | 3 | lib\websocket.py, orchestration\utils.py |
| 40 | `ConnectionManager.send_to_project` | Send a JSON message to all clients connected for a given project_id. | 3 | lib\websocket.py, orchestration\utils.py |
| 62 | `ConnectionManager.broadcast_json` | Broadcast a JSON message to all connected websockets across all projects. | 0 | - |
| 70 | `ConnectionManager.broadcast` | Convenience / backwards-compatible alias: broadcast to a single project. | 1 | orchestration\utils.py |

## Module: `llm\adapter.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 60 | `get_stop_sequences` | Get appropriate stop sequences for a file type. | 1 | llm\adapter.py |
| 65 | `get_stop_sequences_for_step` | Get appropriate stop sequences based on workflow step. | 1 | llm\adapter.py |
| 108 | `LLMAdapter.__init__` | No description available | 0 | - |
| 113 | `LLMAdapter.call` | Call an LLM provider with automatic retry. | 2 | llm\adapter.py |
| 174 | `LLMAdapter._call_provider` | Call a specific provider with retry logic. | 1 | llm\adapter.py |
| 242 | `call_llm` | Convenience function for calling LLM with V2 stop sequences support. | 0 | - |
| 266 | `call_llm_with_usage` | V3: Call LLM and return BOTH text and usage metadata. | 0 | - |

## Module: `llm\prompt_management.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 112 | `build_context` | Build minimal dynamic context for agent calls. | 1 | agents\sub_agents.py |
| 313 | `filter_files_for_step` | Filter files to only those relevant for the current step. | 1 | supervision\supervisor.py |
| 410 | `get_file_summary` | Generate or retrieve 500-char summary of a file. | 1 | llm\prompt_management.py |
| 438 | `build_file_context` | Build file context - use summaries when possible. | 1 | llm\prompt_management.py |
| 479 | `should_auto_approve` | Check if file should be auto-approved (skip Marcus review). | 0 | - |

## Module: `llm\providers\anthropic.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 14 | `call` | Call Anthropic Claude API. | 0 | - |

## Module: `llm\providers\gemini.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 14 | `call` | Call Google Gemini API. | 0 | - |

## Module: `llm\providers\ollama.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 13 | `call` | Call Ollama API (local). | 0 | - |

## Module: `llm\providers\openai.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 14 | `call` | Call OpenAI API. | 0 | - |

## Module: `main.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 64 | `lifespan` | Application startup and shutdown. | 0 | - |
| 145 | `websocket_endpoint` | No description available | 0 | - |
| 202 | `serve_spa` | No description available | 0 | - |

## Module: `orchestration\artifact_contracts.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 31 | `ArtifactContractsRegistry.__init__` | No description available | 0 | - |
| 37 | `ArtifactContractsRegistry.register` | No description available | 9 | orchestration\artifact_contracts.py |
| 43 | `ArtifactContractsRegistry.validate` | file_reader(path) -> returns file contents or None | 6 | orchestration\critical_step_barriers.py, orchestration\self_healing_manager.py (+1 more) |
| 71 | `ArtifactContractsRegistry.get_failures` | Get detailed failure information for each contract. | 1 | orchestration\critical_step_barriers.py |
| 99 | `default_contracts` | Creates default contracts with flexible patterns. | 0 | - |
| 157 | `dynamic_contracts` | Creates contracts based on actual files discovered in the workspace. | 0 | - |

## Module: `orchestration\artifact_types.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 67 | `get_artifact_display_name` | Get human-readable display name for an artifact. | 0 | - |

## Module: `orchestration\backend_probe.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 29 | `BackendProbe.check_route` | Test if a route returns the expected status code. | 2 | orchestration\backend_probe.py |
| 51 | `BackendProbe.is_healthy` | Check if backend is healthy via /api/health. | 0 | - |
| 56 | `BackendProbe.from_env` | Factory method to create probe based on environment. | 0 | - |
| 69 | `HTTPBackendProbe.__init__` | Initialize HTTP probe. | 0 | - |
| 85 | `HTTPBackendProbe._get_base_url` | Get the backend base URL dynamically (port detection for Docker). | 2 | orchestration\backend_probe.py |
| 112 | `HTTPBackendProbe.check_route_detailed` | Test route via HTTP request and return detailed status. | 1 | orchestration\backend_probe.py |
| 171 | `HTTPBackendProbe.check_route` | Wrapper for backward compatibility. | 2 | orchestration\backend_probe.py |
| 182 | `HTTPBackendProbe.is_healthy` | Check health endpoint. | 0 | - |
| 186 | `HTTPBackendProbe.validate_all_contract_routes` | PHASE 4: Validate ALL routes from contracts.md. | 1 | orchestration\self_healing_manager.py |
| 282 | `ASGIBackendProbe.__init__` | Initialize ASGI probe. | 0 | - |
| 292 | `ASGIBackendProbe._get_app` | Lazy-load FastAPI app. | 1 | orchestration\backend_probe.py |
| 304 | `ASGIBackendProbe.check_route` | Test route via ASGI transport. | 2 | orchestration\backend_probe.py |
| 335 | `ASGIBackendProbe.is_healthy` | Check health endpoint. | 0 | - |

## Module: `orchestration\budget_manager.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 157 | `BudgetManager.__init__` | No description available | 0 | - |
| 168 | `BudgetManager._reset_run_state` | Reset state for a new run. | 2 | orchestration\budget_manager.py |
| 176 | `BudgetManager.start_run` | Reset budget usage for a new FAST run. | 1 | orchestration\fast_orchestrator.py |
| 186 | `BudgetManager.max_usd` | Maximum budget in USD. | 0 | - |
| 190 | `BudgetManager._estimate_cost_usd` | Estimate cost in USD for given token counts. | 2 | orchestration\budget_manager.py |
| 197 | `BudgetManager._remaining_usd` | Remaining budget in USD. | 5 | orchestration\budget_manager.py |
| 202 | `BudgetManager.remaining_inr` | Remaining budget in INR. | 0 | - |
| 207 | `BudgetManager.used_inr` | Used budget in INR. | 0 | - |
| 214 | `BudgetManager.get_step_policy` | Get policy for a step (with sensible defaults). | 3 | orchestration\budget_manager.py, orchestration\fast_orchestrator.py |
| 221 | `BudgetManager.allowed_attempts_for_step` | Decide how many attempts this step is allowed, given the remaining budget. | 2 | orchestration\budget_manager.py, orchestration\fast_orchestrator.py |
| 260 | `BudgetManager.can_afford_step` | Quick check if we can afford at least one attempt of this step. | 0 | - |
| 267 | `BudgetManager.register_usage` | Call this after each ACTUAL Gemini call, | 1 | orchestration\fast_orchestrator.py |
| 310 | `BudgetManager.get_budget_status` | Return human-readable budget status emoji. | 1 | orchestration\budget_manager.py |
| 323 | `BudgetManager.get_usage_summary` | Get complete usage summary for logging/debugging. | 6 | api\tracking.py, orchestration\budget_manager.py (+1 more) |
| 340 | `BudgetManager.log_status` | Print current budget status to console. | 5 | orchestration\fast_orchestrator.py |
| 359 | `get_budget_manager` | Get or create a BudgetManager instance. | 1 | api\tracking.py |
| 380 | `reset_budget_manager` | Reset a BudgetManager instance. | 0 | - |
| 393 | `get_all_project_budgets` | Get all tracked project budgets. | 1 | api\tracking.py |
| 399 | `get_budget_for_api` | Get budget data formatted for the frontend CostDashboard API. | 1 | api\tracking.py |

## Module: `orchestration\checkpoint.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 23 | `CheckpointManagerV2.__init__` | No description available | 0 | - |
| 27 | `CheckpointManagerV2.save_project_snapshot` | Capture the entire project state from disk. | 2 | supervision\supervisor.py |
| 34 | `CheckpointManagerV2._save_project_snapshot_sync` | Sync implementation of project capture. | 0 | - |
| 52 | `CheckpointManagerV2.save` | Save a checkpoint for a step using provided file content. | 18 | api\deployment.py, handlers\contracts.py (+3 more) |
| 79 | `CheckpointManagerV2.get_latest` | Get the latest checkpoint for a step. | 0 | - |
| 117 | `CheckpointManagerV2.list_checkpoints` | List all checkpoints, optionally filtered by step. | 0 | - |

## Module: `orchestration\context.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 75 | `get_relevant_files` | Get only the files relevant to the current step. | 0 | - |
| 140 | `get_entity_context` | Get entity-specific context for agents. | 0 | - |
| 204 | `get_previous_files_summary` | Get a brief summary of what files exist in the project. | 0 | - |
| 254 | `CrossStepContext.__init__` | No description available | 0 | - |
| 265 | `CrossStepContext._ctx` | No description available | 0 | - |
| 268 | `CrossStepContext.record_step_completion` | Record that a step completed with optional summary data. | 1 | orchestration\fast_orchestrator.py |
| 275 | `CrossStepContext.set_entities` | Set the primary entities from analysis step. | 1 | orchestration\fast_orchestrator.py |
| 279 | `CrossStepContext.set_architecture` | Set architecture summary from architecture step. | 1 | orchestration\fast_orchestrator.py |
| 283 | `CrossStepContext.get_summary_for_step` | Get a context summary tailored for the current step. | 0 | - |
| 318 | `CrossStepContext.get_completed_steps` | Get list of completed steps. | 0 | - |
| 322 | `CrossStepContext.reset` | Reset context for a new workflow run. | 2 | orchestration\fast_orchestrator.py, utils\parser.py |
| 332 | `CrossStepContext.get_or_create` | Factory method to get or create context for a project. | 1 | orchestration\fast_orchestrator.py |

## Module: `orchestration\contract_expansion.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 14 | `ContractExpansionManager.__init__` | No description available | 0 | - |
| 19 | `ContractExpansionManager.create_backup` | Create a backup of the current contracts.md content. | 0 | - |
| 25 | `ContractExpansionManager.rollback_contract` | Rollback contracts.md to the backup content. | 0 | - |
| 30 | `ContractExpansionManager.detect_unknown_endpoint` | Detect if failure is due to unknown endpoint (404 on unknown path). | 0 | - |
| 123 | `ContractExpansionManager.expand_contract` | Expand contracts.md with the new delta. | 0 | - |
| 153 | `ContractExpansionManager._validate_expansion` | Validate safeguards. | 1 | orchestration\contract_expansion.py |
| 175 | `ContractExpansionManager.regenerate_backend_for_new_entity` | Regenerate backend components for the new entity. | 0 | - |

## Module: `orchestration\contract_parser.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 28 | `ContractParser.__init__` | Initialize contract parser. | 0 | - |
| 39 | `ContractParser.get_expected_routes` | Extract expected routes for validation. | 2 | orchestration\backend_probe.py, orchestration\contract_parser.py |
| 145 | `ContractParser._parse_contracts_md` | Parse route contracts from contracts.md. | 2 | orchestration\contract_expansion.py |
| 178 | `ContractParser._parse_test_file` | Parse expected routes from test_contract_api.py. | 0 | - |
| 220 | `ContractParser.get_primary_entity_routes` | Get routes for the primary entity only. | 0 | - |

## Module: `orchestration\critical_step_barriers.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 20 | `CriticalStepBarriers.__init__` | No description available | 0 | - |
| 27 | `CriticalStepBarriers.enforce` | Returns True if allowed to continue. | 0 | - |
| 61 | `CriticalStepBarriers.check_artifact` | Check if a specific artifact passes validation. | 0 | - |
| 69 | `CriticalStepBarriers.get_all_failures` | Get detailed failure information for all artifacts. | 0 | - |

## Module: `orchestration\error_router.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 58 | `ErrorRouter.get_repair_artifact` | Get the artifact name to repair for a failed step. | 2 | orchestration\error_router.py, orchestration\healing_pipeline.py |
| 62 | `ErrorRouter.is_repairable` | Check if a step can be repaired. | 2 | orchestration\healing_pipeline.py |
| 66 | `ErrorRouter.get_repair_priority` | Get repair priority (lower = higher priority). | 1 | orchestration\error_router.py |
| 71 | `ErrorRouter.get_repair_order` | Sort failed steps by repair priority. | 1 | orchestration\healing_pipeline.py |
| 75 | `ErrorRouter.decide_repair_strategy` | LOOP CONSOLIDATION: Select strategy based on ERROR DEPTH, not retry count. | 2 | orchestration\healing_pipeline.py, supervision\supervisor.py |
| 142 | `ErrorRouter._analyze_error_depth` | Analyze error to determine depth level. | 1 | orchestration\error_router.py |
| 202 | `ErrorRouter._standard_route` | Standard attention-based routing. | 5 | orchestration\error_router.py |
| 233 | `ErrorRouter._exploratory_route` | E-AM: Inject foreign patterns from other archetypes. | 1 | orchestration\error_router.py |
| 264 | `ErrorRouter._transformational_route` | T-AM: Mutate constraints when fundamentally stuck. | 1 | orchestration\error_router.py |
| 285 | `ErrorRouter._select_mutation_operator` | Select T-AM mutation operator based on error analysis. | 1 | orchestration\error_router.py |
| 311 | `ErrorRouter._build_mutation` | Build the mutation based on operator and context. | 1 | orchestration\error_router.py |
| 358 | `ErrorRouter._merge_values` | Merge base strategy values with foreign pattern values. | 1 | orchestration\error_router.py |
| 372 | `ErrorRouter._get_repair_strategies` | Get the standard repair strategies. | 1 | orchestration\error_router.py |
| 432 | `ErrorRouter.report_repair_outcome` | Report the outcome of a repair strategy decision. | 1 | orchestration\healing_pipeline.py |
| 465 | `ErrorRouter.get_last_decision_id` | Get the decision_id from the last repair strategy decision. | 0 | - |
| 469 | `ErrorRouter.get_last_mode` | Get the AM mode used in the last decision. | 0 | - |

## Module: `orchestration\failure_classifier.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 66 | `FailureClassifier.classify` | Classify error with strict rules. | 3 | core\failure_boundary.py |
| 105 | `FailureClassifier._could_reasoning_fix` | Ultimate test: Could regenerating code fix this? | 1 | orchestration\failure_classifier.py |

## Module: `orchestration\fallback_api_agent.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 27 | `FallbackAPIAgent.__init__` | Initialize the fallback API agent. | 0 | - |
| 36 | `FallbackAPIAgent.generate` | Generate API client code for the specified entity. | 0 | - |
| 61 | `FallbackAPIAgent.generate_for_entity` | Generate an API client for a specific entity. | 6 | orchestration\fallback_api_agent.py, orchestration\fallback_model_agent.py (+3 more) |

## Module: `orchestration\fallback_model_agent.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 25 | `FallbackModelAgent.__init__` | Initialize the fallback model agent. | 0 | - |
| 29 | `FallbackModelAgent.generate` | Generate model code for the specified entity. | 0 | - |
| 50 | `FallbackModelAgent.generate_for_entity` | Generate a Beanie Document model for a specific entity. | 6 | orchestration\fallback_api_agent.py, orchestration\fallback_model_agent.py (+3 more) |

## Module: `orchestration\fallback_router_agent.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 27 | `FallbackRouterAgent.__init__` | Initialize the fallback router agent. | 0 | - |
| 36 | `FallbackRouterAgent.generate` | Generate router code for the specified entity. | 0 | - |
| 61 | `FallbackRouterAgent.generate_for_entity` | Generate a CRUD router for a specific entity. | 6 | orchestration\fallback_api_agent.py, orchestration\fallback_model_agent.py (+3 more) |

## Module: `orchestration\fast_orchestrator.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 81 | `FASTOrchestratorV2.__init__` | Initialize FAST V2 orchestrator. | 0 | - |
| 156 | `FASTOrchestratorV2.run` | Execute the FAST V2 workflow. | 7 | api\workspace.py, orchestration\fast_orchestrator.py (+1 more) |
| 763 | `FASTOrchestratorV2._validate_critical_files` | Validate critical files exist before running testing/preview steps. | 1 | orchestration\fast_orchestrator.py |
| 821 | `FASTOrchestratorV2._validate_step_output` | Validate the output of a critical step. | 1 | orchestration\fast_orchestrator.py |
| 912 | `FASTOrchestratorV2._attempt_healing` | Attempt to heal a failed step using the healing pipeline. | 2 | orchestration\fast_orchestrator.py |
| 930 | `FASTOrchestratorV2._save_checkpoint` | Save a checkpoint after successful step completion. | 1 | orchestration\fast_orchestrator.py |
| 970 | `FASTOrchestratorV2._record_step_context` | V2 Feature: Record step completion to cross-step context. | 1 | orchestration\fast_orchestrator.py |
| 1044 | `run_fast_v2_workflow` | Convenience function to run FAST V2 workflow. | 0 | - |

## Module: `orchestration\file_persistence.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 21 | `FilePersistence.__init__` | No description available | 0 | - |
| 24 | `FilePersistence.write` | Atomically write text to a file. | 5 | orchestration\checkpoint.py, orchestration\contract_expansion.py (+3 more) |
| 59 | `FilePersistence.read` | Read a file and return its contents, or None if not found. | 2 | orchestration\file_persistence.py, persistence\filesystem.py |
| 73 | `FilePersistence.exists` | Check if a file exists. | 155 | api\projects.py, api\sandbox.py (+40 more) |
| 78 | `FilePersistence.delete` | Delete a file if it exists. | 4 | api\projects.py, orchestration\backend_probe.py |
| 92 | `FilePersistence.set_base_path` | Set the base path for all operations. | 0 | - |
| 96 | `FilePersistence.ensure_dir` | Ensure a directory exists. | 0 | - |

## Module: `orchestration\heal_helpers.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 21 | `has_query_annotations` | Check if router code properly uses FastAPI Query() annotations. | 1 | orchestration\heal_helpers.py |
| 41 | `has_pagination_params` | Check if router code includes expected pagination parameters. | 1 | orchestration\heal_helpers.py |
| 58 | `has_proper_imports` | Validate that router has essential FastAPI imports. | 1 | orchestration\heal_helpers.py |
| 80 | `has_router_variable` | Check that router code defines the router variable. | 1 | orchestration\heal_helpers.py |
| 93 | `has_optional_list_params` |  | 2 | orchestration\heal_helpers.py, persistence\writer.py |
| 177 | `validate_router_code` | Comprehensive validation of LLM-generated router code. | 1 | orchestration\heal_helpers.py |
| 223 | `validate_router_file` | Validate a router file on disk. | 2 | orchestration\self_healing_manager.py |

## Module: `orchestration\healing_budget.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 57 | `HealingBudget.reset` | Reset budget for a new test run. | 2 | orchestration\fast_orchestrator.py, utils\parser.py |
| 72 | `HealingBudget.llm_calls_remaining` | No description available | 0 | - |
| 77 | `HealingBudget.critical_regens_remaining` | No description available | 0 | - |
| 82 | `HealingBudget.docker_restarts_remaining` | No description available | 0 | - |
| 86 | `HealingBudget.can_call_llm` | No description available | 1 | supervision\supervisor.py |
| 89 | `HealingBudget.can_regen_critical` | No description available | 1 | orchestration\self_healing_manager.py |
| 92 | `HealingBudget.can_restart_docker` | No description available | 0 | - |
| 95 | `HealingBudget.is_exhausted` | Budget is exhausted when: | 2 | orchestration\healing_budget.py, orchestration\healing_pipeline.py |
| 111 | `HealingBudget.use_llm_call` | No description available | 1 | supervision\supervisor.py |
| 132 | `HealingBudget.use_critical_regen` | No description available | 1 | orchestration\self_healing_manager.py |
| 152 | `HealingBudget.use_docker_restart` | No description available | 0 | - |
| 176 | `HealingBudget.get_status` | No description available | 3 | orchestration\healing_budget.py, tools\implementations.py |
| 199 | `HealingBudget.get_exhaustion_diagnostic` | No description available | 1 | orchestration\healing_pipeline.py |
| 238 | `get_healing_budget` | Get or create a healing budget for a project. | 3 | orchestration\healing_pipeline.py, orchestration\self_healing_manager.py (+1 more) |
| 248 | `reset_healing_budget` | Reset healing budget at the start of testing_backend. | 1 | handlers\testing_backend.py |
| 258 | `clear_healing_budget` | Remove healing budget after workflow completion. | 0 | - |
| 264 | `get_all_budgets` | Return a snapshot of all active budgets. | 0 | - |

## Module: `orchestration\healing_pipeline.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 35 | `HealingPipeline.__init__` | No description available | 0 | - |
| 56 | `HealingPipeline.attempt_heal` | Attempt to heal failed step. Returns SELF_HEALED or generated code. | 2 | orchestration\fast_orchestrator.py, orchestration\healing_pipeline.py |
| 184 | `HealingPipeline._fallback` | PHASE 3: Selective fallback - ONLY for boilerplate files. | 1 | orchestration\healing_pipeline.py |
| 243 | `HealingPipeline._is_critical_step` | PHASE 3: Check if step involves critical files. | 2 | orchestration\healing_pipeline.py |
| 260 | `HealingPipeline._is_boilerplate_step` | PHASE 3: Check if step involves boilerplate files. | 1 | orchestration\healing_pipeline.py |
| 280 | `HealingPipeline._generate_fallback_tests` | Generate fallback test_api.py to prevent 'no tests ran'. | 0 | - |
| 350 | `HealingPipeline._maybe_mutate_config_after_failures` | T-AM: Mutate strategy config after repeated failures. | 0 | - |
| 365 | `HealingPipeline._report_healing_outcome` | Report outcome for self-evolution. | 3 | orchestration\healing_pipeline.py |
| 383 | `HealingPipeline.can_heal` | Check if a step can be healed. | 0 | - |
| 387 | `HealingPipeline.get_healing_options` | Get available healing options for a step. | 0 | - |
| 395 | `HealingPipeline.heal_all` | Heal all failed steps in priority order. | 0 | - |
| 411 | `HealingPipeline._record_healing_attempt` | PHASE 5: Record a healing attempt in memory. | 3 | orchestration\healing_pipeline.py |
| 452 | `HealingPipeline._is_duplicate_code` | PHASE 5: Check if code is identical to a previous attempt. | 1 | orchestration\healing_pipeline.py |
| 463 | `HealingPipeline.get_healing_summary` | PHASE 5: Get summary of healing attempts. | 0 | - |
| 492 | `HealingPipeline._load_healing_memory` | Load healing memory from JSON file (persistent across runs). | 1 | orchestration\healing_pipeline.py |
| 515 | `HealingPipeline._save_healing_memory` | Save healing memory to JSON file (persistent across runs). | 2 | orchestration\healing_pipeline.py |
| 534 | `HealingPipeline.clear_healing_memory` | Clear healing memory (call after successful workflow completion). | 0 | - |

## Module: `orchestration\healing_policy.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 58 | `HealingPolicy.__init__` | Initialize healing policy. | 0 | - |
| 72 | `HealingPolicy.classify_error` | Classify the type of error based on context. | 0 | - |
| 129 | `HealingPolicy.get_healing_actions` | Determine healing actions based on error type. | 0 | - |
| 274 | `HealingPolicy.record_repair` | Record that a repair was attempted. | 0 | - |
| 287 | `HealingPolicy.should_stop_healing` | Check if we should stop healing to avoid infinite loops. | 0 | - |
| 302 | `HealingPolicy.reset` | Reset repair history (e.g., for new workflow run). | 2 | orchestration\fast_orchestrator.py, utils\parser.py |

## Module: `orchestration\isolation.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 60 | `IsolationManager.__init__` | No description available | 0 | - |
| 71 | `IsolationManager.isolate_step` | Quarantine a step and its outputs. | 1 | orchestration\fast_orchestrator.py |
| 145 | `IsolationManager.is_isolated` | Check if a step has been isolated. | 0 | - |
| 149 | `IsolationManager.get_isolated_steps` | Get list of all isolated steps. | 0 | - |
| 153 | `IsolationManager.can_use_artifact` | Check if an artifact is safe to use. | 0 | - |
| 188 | `IsolationManager.depends_on_step` | Check if a step can depend on another step. | 0 | - |
| 210 | `IsolationManager.get_quarantine_report` | Generate a quarantine report for debugging/logging. | 0 | - |
| 227 | `IsolationManager.clear` | Clear all isolation data (for testing or workflow restart). | 9 | orchestration\healing_budget.py, orchestration\healing_policy.py (+3 more) |

## Module: `orchestration\llm_output_integrity.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 23 | `LLMOutputIntegrity.__init__` | No description available | 0 | - |
| 29 | `LLMOutputIntegrity.validate` | No description available | 6 | orchestration\critical_step_barriers.py, orchestration\self_healing_manager.py (+1 more) |
| 50 | `LLMOutputIntegrity._looks_truncated` | No description available | 2 | orchestration\llm_output_integrity.py |
| 65 | `LLMOutputIntegrity._balanced_brackets` | No description available | 3 | orchestration\llm_output_integrity.py, orchestration\structural_compiler.py |
| 99 | `LLMOutputIntegrity._has_unterminated_string` | No description available | 2 | orchestration\llm_output_integrity.py |
| 128 | `LLMOutputIntegrity._has_incomplete_class_or_function` | Checks if the text ends abruptly inside a function/class header. | 2 | orchestration\llm_output_integrity.py |
| 159 | `LLMOutputIntegrity.get_issues` | Get list of all issues found. | 1 | supervision\supervisor.py |

## Module: `orchestration\prompt_adapter.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 37 | `PromptAdapter.__init__` | No description available | 0 | - |
| 40 | `PromptAdapter.increment_failure_count` | Increment the failure counter for a step. | 3 | supervision\supervisor.py |
| 44 | `PromptAdapter.record_success` | Reset failure count on success. | 0 | - |
| 48 | `PromptAdapter.get_failure_count` | Get the number of failures for a step. | 0 | - |
| 52 | `PromptAdapter.adapt` | Applies controlled transformations to improve success rate. | 2 | supervision\supervisor.py |
| 102 | `PromptAdapter.get_context_hint` | Get a context hint based on failure history. | 2 | supervision\supervisor.py |
| 133 | `PromptAdapter.get_adaptation_level` | Get the current adaptation level (0 = normal, 1-3 = escalating strictness). | 0 | - |

## Module: `orchestration\retry_policy.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 31 | `RetryPolicy.retry_environment_failures` | Retry with backoff for environment failures only. | 1 | orchestration\fast_orchestrator.py |
| 80 | `RetryPolicy.should_retry` | Check if a result should be retried. | 0 | - |
| 97 | `RetryPolicy.get_retry_delay` | Get retry delay for attempt number. | 0 | - |

## Module: `orchestration\router_utils.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 16 | `is_router_imported` | Check if a router is already imported in main.py. | 1 | orchestration\router_utils.py |
| 40 | `is_router_registered` | Check if a router is already registered in main.py. | 1 | orchestration\router_utils.py |
| 62 | `get_missing_routers` | Get routers that are missing import or registration. | 0 | - |
| 78 | `get_routers_from_directory` | Discover router names from a routers directory. | 0 | - |

## Module: `orchestration\self_healing_manager.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 73 | `SelfHealingManager.__init__` | Args: | 0 | - |
| 107 | `SelfHealingManager._get_entity` | Get the primary entity from ACTUAL models in models.py. | 0 | - |
| 132 | `SelfHealingManager.repair` | Attempt to repair a broken artifact with tailored strategy. | 4 | orchestration\critical_step_barriers.py, orchestration\healing_pipeline.py |
| 176 | `SelfHealingManager._is_critical_artifact` | PHASE 3: Check if artifact is critical (must use Derek, not fallback). | 1 | orchestration\self_healing_manager.py |
| 202 | `SelfHealingManager._repair_backend_router` | Repair the backend router using LLM or fallback template. | 0 | - |
| 281 | `SelfHealingManager._repair_backend_vertical` | LOOP CONSOLIDATION: Single adaptive attempt for backend vertical repair. | 2 | orchestration\self_healing_manager.py |
| 359 | `SelfHealingManager._calculate_adaptive_tokens` | Calculate tokens based on error complexity, not retry count. | 1 | orchestration\self_healing_manager.py |
| 403 | `SelfHealingManager._derek_generate_backend` | Call Derek (supervised agent) to generate backend vertical. | 2 | orchestration\contract_expansion.py, orchestration\self_healing_manager.py |
| 662 | `SelfHealingManager._build_test_feedback_context` | PHASE 2: Build test failure context for Derek. | 1 | orchestration\self_healing_manager.py |
| 686 | `SelfHealingManager._parse_test_failures` | PHASE 2: Parse test output to extract specific failure reasons. | 1 | orchestration\self_healing_manager.py |
| 712 | `SelfHealingManager._validate_backend_can_start` | FIX: Sandbox-aware backend validation with comprehensive route testing. | 1 | orchestration\self_healing_manager.py |
| 809 | `SelfHealingManager._ensure_router_wired` | Ensure router is wired in main.py (idempotent). | 1 | orchestration\self_healing_manager.py |
| 893 | `SelfHealingManager._ensure_model_wired` | Ensure model is imported and registered in document_models list in main.py. | 0 | - |
| 966 | `SelfHealingManager._repair_frontend_api` | Repair the frontend API client using LLM or fallback template. | 1 | orchestration\self_healing_manager.py |
| 1002 | `SelfHealingManager._repair_backend_main` | Repair backend main.py - reads actual routers and db function. | 1 | orchestration\self_healing_manager.py |
| 1029 | `SelfHealingManager._repair_backend_db` | Repair backend/app/db.py - optional wrapper for legacy compatibility. | 1 | orchestration\self_healing_manager.py |
| 1075 | `SelfHealingManager._get_router_prompt` | Generate a dynamic router prompt based on actual entity. | 1 | orchestration\self_healing_manager.py |
| 1100 | `SelfHealingManager._get_api_prompt` | Generate a dynamic API client prompt based on actual entity. | 1 | orchestration\self_healing_manager.py |
| 1124 | `SelfHealingManager._get_main_template` | Generate a DYNAMIC main.py template based on actual workspace contents. | 1 | orchestration\self_healing_manager.py |
| 1204 | `SelfHealingManager._write_file` | Write content to file, creating directories as needed. | 8 | orchestration\self_healing_manager.py |
| 1209 | `SelfHealingManager._read_file` | Read file content, return None if not found. | 0 | - |

## Module: `orchestration\state.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 23 | `WorkflowStateManager.get_session` | Get or create session. | 7 | orchestration\state.py |
| 32 | `WorkflowStateManager.is_running` | Check if a workflow is running for a project. | 3 | api\workspace.py, utils\entity_discovery.py |
| 38 | `WorkflowStateManager.set_running` | Set the running state for a project. | 0 | - |
| 46 | `WorkflowStateManager.try_start_workflow` | Atomically check if workflow can start and mark it as running. | 4 | api\workspace.py, workflow\engine.py |
| 62 | `WorkflowStateManager.stop_workflow` | Atomically mark workflow as stopped. | 3 | orchestration\fast_orchestrator.py, workflow\engine.py |
| 71 | `WorkflowStateManager.is_paused` | Check if a workflow is paused for a project. | 2 | api\workspace.py |
| 77 | `WorkflowStateManager.get_paused_state` | Get the paused workflow state. | 1 | workflow\engine.py |
| 83 | `WorkflowStateManager.pause_workflow` | Pause a workflow for user input. State is persisted to DB. | 1 | workflow\engine.py |
| 112 | `WorkflowStateManager.resume_workflow` | Resume a paused workflow, returning the saved state and cleaning up. | 1 | workflow\engine.py |
| 127 | `WorkflowStateManager.set_intent` | Store analyzed intent for a project. | 4 | handlers\analysis.py, handlers\refine.py |
| 134 | `WorkflowStateManager.get_intent` | Get stored intent for a project. | 13 | handlers\architecture.py, handlers\backend.py (+10 more) |
| 140 | `WorkflowStateManager.set_original_request` | Store original user request. | 2 | handlers\analysis.py |
| 147 | `WorkflowStateManager.get_original_request` | Get original user request. | 0 | - |
| 153 | `WorkflowStateManager.set_manager` | Store connection manager (Memory only). | 0 | - |
| 158 | `WorkflowStateManager.get_manager` | Get connection manager. | 0 | - |
| 163 | `WorkflowStateManager.cleanup` | Clean up state (stop running, unpause). Does NOT clear completed_steps for resume. | 1 | api\workspace.py |
| 179 | `WorkflowStateManager.save_completed_step` | Save a completed step to MongoDB for resume support. | 1 | orchestration\fast_orchestrator.py |
| 198 | `WorkflowStateManager.get_completed_steps` | Get list of completed steps for a project. | 3 | api\workspace.py, orchestration\fast_orchestrator.py |
| 204 | `WorkflowStateManager.get_step_context` | Get saved step context for resume. | 0 | - |
| 210 | `WorkflowStateManager.get_current_step` | Get last completed step. | 1 | api\workspace.py |
| 216 | `WorkflowStateManager.clear_progress` | Clear all progress for a fresh start. | 2 | api\workspace.py |
| 227 | `WorkflowStateManager.has_progress` | Check if project has any saved progress. | 3 | api\workspace.py, workflow\engine.py |
| 233 | `WorkflowStateManager.acquire_lock` | No description available | 0 | - |
| 237 | `WorkflowStateManager.release_lock` | No description available | 0 | - |

## Module: `orchestration\step_contracts.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 79 | `StepContracts.requires_files` | Get required file paths/directories for a step. | 0 | - |
| 83 | `StepContracts.requires_content` | Get required content patterns for a step. | 2 | orchestration\step_contracts.py |
| 87 | `StepContracts.check_content` | Check if text contains all required patterns for a step. | 0 | - |
| 94 | `StepContracts.get_missing_content` | Get list of missing content patterns. | 0 | - |

## Module: `orchestration\structural_compiler.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 25 | `StructuralCompiler.__init__` | No description available | 0 | - |
| 31 | `StructuralCompiler.validate_python` | No description available | 1 | orchestration\structural_compiler.py |
| 38 | `StructuralCompiler.get_python_errors` | Get Python syntax error details. | 0 | - |
| 49 | `StructuralCompiler.validate_js` | No description available | 1 | orchestration\structural_compiler.py |
| 105 | `StructuralCompiler.router_is_complete` | Check if router has all required CRUD operations. | 2 | orchestration\fast_orchestrator.py, orchestration\self_healing_manager.py |
| 122 | `StructuralCompiler.get_missing_router_functions` | Get list of missing CRUD operations. | 0 | - |
| 138 | `StructuralCompiler.api_is_complete` | Check if API client has all required exports for the entity. | 2 | orchestration\fast_orchestrator.py, orchestration\self_healing_manager.py |
| 165 | `StructuralCompiler.get_missing_api_exports` | Get list of missing API exports. | 0 | - |
| 192 | `StructuralCompiler._balanced_brackets` | No description available | 3 | orchestration\llm_output_integrity.py, orchestration\structural_compiler.py |
| 226 | `StructuralCompiler.validate_file_structure` | Validate file structure based on extension (brackets, basic syntax). | 0 | - |

## Module: `orchestration\task_graph.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 21 | `TaskGraph.__init__` | No description available | 0 | - |
| 56 | `TaskGraph.get_steps` | Get the ordered list of all workflow steps. | 5 | orchestration\fast_orchestrator.py |
| 60 | `TaskGraph.required_for` | Get the dependencies required for a step. | 2 | orchestration\task_graph.py |
| 64 | `TaskGraph.is_ready` | Check if all dependencies for a step are satisfied. | 2 | orchestration\fast_orchestrator.py, orchestration\task_graph.py |
| 69 | `TaskGraph.get_blocking` | Get the dependencies that are NOT yet completed. | 1 | orchestration\fast_orchestrator.py |
| 74 | `TaskGraph.get_dependents` | Get all steps that depend on this step. | 0 | - |
| 82 | `TaskGraph.get_parallel_batch` | Get all steps that can run in parallel right now. | 0 | - |

## Module: `orchestration\token_policy.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 137 | `get_tokens_for_step` | Get appropriate token allocation for a workflow step. | 5 | agents\sub_agents.py, handlers\analysis.py (+3 more) |
| 208 | `get_step_description` | Get human-readable description of a workflow step. | 0 | - |
| 215 | `get_all_policies` | Get all token policies (for debugging/monitoring). | 0 | - |
| 257 | `get_temperature` | Get appropriate temperature for a workflow step. | 1 | orchestration\token_policy.py |
| 301 | `get_retry_parameters` | Get adjusted parameters for retry attempts. | 0 | - |

## Module: `orchestration\utils.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 11 | `broadcast_to_project` | Broadcast a message to all clients connected to a project. | 15 | agents\sub_agents.py, api\workspace.py (+6 more) |
| 31 | `pluralize` | Simple English pluralization helper. | 12 | handlers\contracts.py, handlers\frontend_mock.py (+3 more) |

## Module: `orchestration\wiring_utils.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 25 | `_safe_write_validated_python` | Apply the SAME validation gate as LLM output: | 2 | orchestration\wiring_utils.py |
| 49 | `wire_router` | Ensure router is wired in main.py (idempotent). | 2 | handlers\backend.py, orchestration\self_healing_manager.py |
| 133 | `wire_model` | Ensure model is imported AND registered in document_models list in main.py. | 2 | handlers\backend.py, orchestration\self_healing_manager.py |

## Module: `persistence\filesystem.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 32 | `sanitize_project_id` | Normalize project IDs for safe filesystem use. | 2 | persistence\filesystem.py, persistence\writer.py |
| 40 | `get_safe_workspace_path` | Build a safe, absolute project workspace path under base_path. | 4 | persistence\filesystem.py, persistence\writer.py |
| 69 | `within_workspace` | No description available | 1 | persistence\filesystem.py |
| 81 | `read_file_content` | Read a text file asynchronously. | 0 | - |
| 86 | `write_file_content` | Write text content to a file asynchronously, ensuring parent directory exists. | 1 | persistence\filesystem.py |
| 93 | `write_file_content_sync` | Write text content to a file synchronously, ensuring parent directory exists. | 0 | - |
| 108 | `save_generated_files` | Save a batch of generated files relative to the project root. | 0 | - |
| 129 | `get_project_file_tree` |  UPDATED: Build a recursive file tree for the given project. | 0 | - |
| 140 | `_read_dir_recursive` |  UPDATED: Recursively read directory structure, returning FileTreeEntry. | 2 | persistence\filesystem.py |

## Module: `persistence\validator.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 12 | `normalize_python_filename` | Normalize Python filenames for Linux/Docker compatibility. | 1 | persistence\validator.py |
| 56 | `fix_path_prefix` | Auto-fix common path prefix issues. | 1 | persistence\validator.py |
| 95 | `validate_jsx_completeness` | Basic validation that JSX has balanced tags. | 1 | persistence\validator.py |
| 125 | `validate_file_output` | Validate and sanitize agent output before writing. | 8 | handlers\architecture.py, handlers\backend.py (+5 more) |

## Module: `persistence\writer.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 16 | `safe_write_llm_files` | Safely write LLM-generated files to the workspace. | 1 | persistence\writer.py |
| 172 | `persist_agent_output` | Wrapper for safe_write_llm_files to handle standard agent response dict. | 0 | - |

## Module: `sandbox\health_monitor.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 16 | `HealthMonitor.__init__` | No description available | 0 | - |
| 20 | `HealthMonitor.wait_for_healthy` | Wait for all containers to become healthy, based on Docker's healthcheck. | 1 | sandbox\sandbox_manager.py |
| 60 | `HealthMonitor._check_container_health` | Check if a specific container is healthy. | 1 | sandbox\health_monitor.py |
| 104 | `HealthMonitor._check_http_health` | Perform actual HTTP health check to the backend /api/health endpoint. | 2 | sandbox\health_monitor.py |
| 147 | `HealthMonitor._inspect_container_state` | Run `docker inspect` and return the .State dict, or None on failure. | 2 | sandbox\health_monitor.py |
| 172 | `HealthMonitor.get_detailed_health` | Get detailed health information for all containers. | 0 | - |

## Module: `sandbox\log_streamer.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 17 | `LogStreamer.__init__` | No description available | 0 | - |
| 22 | `LogStreamer._stream_logs_from_cli` | Internal helper: run `docker logs -f` on the container and forward | 1 | sandbox\log_streamer.py |
| 75 | `LogStreamer.start_streaming` | Start streaming logs for a container. | 0 | - |
| 92 | `LogStreamer.stop_streaming` | Stop a log stream, if running. | 1 | sandbox\log_streamer.py |
| 107 | `LogStreamer.stop_all_streams` | Stop all active log streams. | 0 | - |

## Module: `sandbox\pool.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 47 | `SandboxPool.__init__` | No description available | 0 | - |
| 57 | `SandboxPool.initialize` | Initialize the pool with pre-warmed containers. | 1 | sandbox\pool.py |
| 87 | `SandboxPool.acquire` | Acquire a sandbox for a project. | 1 | orchestration\state.py |
| 124 | `SandboxPool.release` | Release a sandbox back to the pool or stop it. | 1 | orchestration\state.py |
| 155 | `SandboxPool.shutdown` | Shutdown the pool and all containers. | 0 | - |
| 171 | `SandboxPool.stats` | Get pool statistics. | 0 | - |
| 181 | `SandboxPool._maintain_pool` | Background task to maintain pool size. | 1 | sandbox\pool.py |
| 193 | `SandboxPool._refill_pool` | Refill the pool to maintain target size. | 3 | sandbox\pool.py |
| 205 | `SandboxPool._warm_container` | Create and warm a new container. | 1 | sandbox\pool.py |
| 242 | `SandboxPool._create_on_demand` | Fallback: Create sandbox on-demand using existing SandboxManager. | 1 | sandbox\pool.py |
| 272 | `SandboxPool._is_healthy` | Check if a sandbox container is healthy. | 1 | sandbox\pool.py |
| 278 | `SandboxPool._stop_sandbox` | Stop a sandbox container. | 2 | sandbox\pool.py |
| 286 | `SandboxPool._sandbox_to_dict` | Convert PooledSandbox to dict. | 2 | sandbox\pool.py |
| 302 | `get_sandbox_pool` | Get the global sandbox pool instance. | 1 | sandbox\pool.py |
| 310 | `initialize_pool` | Initialize the sandbox pool on app startup. | 0 | - |

## Module: `sandbox\preview_manager.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 12 | `PreviewManager.__init__` | No description available | 0 | - |
| 15 | `PreviewManager.create_preview` | Return Traefik preview URL (no tunnel needed) | 0 | - |
| 37 | `PreviewManager.stop_preview` | Stop a preview (optional - Traefik continues routing) | 0 | - |
| 54 | `PreviewManager.list_previews` | List all active preview URLs | 0 | - |

## Module: `sandbox\sandbox_config.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 40 | `SandboxConfig.to_dict` | Convert config to dictionary | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 60 | `SandboxConfig.from_dict` | Create config from dictionary | 2 | utils\entity_discovery.py |

## Module: `sandbox\sandbox_manager.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 23 | `SandboxManager.__init__` | No description available | 0 | - |
| 37 | `SandboxManager.get_status` | No description available | 3 | orchestration\healing_budget.py, tools\implementations.py |
| 50 | `SandboxManager.create_sandbox` | No description available | 2 | sandbox\pool.py, tools\implementations.py |
| 91 | `SandboxManager.start_sandbox` | Start Docker-based backend/frontend containers for a project. | 3 | tools\implementations.py |
| 174 | `SandboxManager.stop_sandbox` | Stop Docker containers for this sandbox. | 2 | sandbox\sandbox_manager.py, tools\implementations.py |
| 206 | `SandboxManager.destroy_sandbox` | Stop containers and remove sandbox metadata. | 0 | - |
| 228 | `SandboxManager.run_backend_tests` | Run backend tests using Docker Compose. | 0 | - |
| 275 | `SandboxManager.run_frontend_tests` | Run frontend tests (Playwright) using Docker Compose. | 0 | - |
| 325 | `SandboxManager._run_compose_command` | No description available | 5 | sandbox\sandbox_manager.py |
| 367 | `SandboxManager._get_compose_logs` | No description available | 1 | sandbox\sandbox_manager.py |
| 378 | `SandboxManager._validate_project_structure` | Ensure golden backend/frontend/docker files exist before we start containers | 4 | sandbox\sandbox_manager.py |
| 410 | `SandboxManager._get_compose_command` | No description available | 1 | sandbox\sandbox_manager.py |
| 429 | `SandboxManager._get_project_containers_async` | Async version of _get_project_containers. | 0 | - |
| 473 | `SandboxManager._get_project_containers` | No description available | 1 | sandbox\sandbox_manager.py |
| 520 | `SandboxManager.execute_command` | Execute a command inside a service container (Docker) - async version. | 2 | sandbox\sandbox_manager.py, tools\implementations.py |
| 576 | `SandboxManager.exec_in_container` | Alias for execute_command (API compatibility). | 0 | - |
| 586 | `SandboxManager.get_preview_url` | Get the frontend preview URL for a running sandbox. | 0 | - |
| 616 | `SandboxManager.get_backend_url` | Get the backend API URL for a running sandbox (dynamic port detection). | 0 | - |

## Module: `supervision\quality_gate.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 24 | `check_quality_gate` | Check if workflow should be blocked due to quality issues. | 1 | supervision\supervisor.py |
| 75 | `override_quality_gate` | Allow user to override quality gate. | 0 | - |
| 81 | `is_blocked` | Check if project is blocked by quality gate. | 0 | - |
| 86 | `get_block_reason` | Get the reason for quality gate block. | 0 | - |

## Module: `supervision\supervisor.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 26 | `marcus_supervise` | Marcus reviews an agent's output for quality and correctness. | 1 | supervision\supervisor.py |
| 429 | `categorize_issue_severity` | Categorize Marcus's issues into 'critical' or 'warning' using Universal Attention. | 1 | supervision\supervisor.py |
| 452 | `postprocess_marcus_issues` | Split issues into critical (must fix) and warnings (nice-to-have). | 1 | supervision\supervisor.py |
| 473 | `_extract_archetype` | Extract an archetype identifier from the user request. | 2 | supervision\supervisor.py |
| 512 | `supervised_agent_call` | Call an agent with Marcus supervision. | 0 | - |

## Module: `supervision\tiered_review.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 72 | `get_review_level` | Determine the review level needed for a file. | 2 | supervision\supervisor.py, supervision\tiered_review.py |
| 104 | `classify_files` | Classify files by their review level. | 2 | supervision\tiered_review.py |
| 124 | `get_review_summary` | Get a summary of review levels for logging. | 1 | supervision\tiered_review.py |
| 137 | `tiered_review` | Apply tiered review to a list of files. | 1 | supervision\tiered_review.py |
| 254 | `parallel_tiered_review` | Run tiered reviews in parallel for multiple agent outputs. | 0 | - |

## Module: `tools\implementations.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 51 | `_async_run_command` | Run a command asynchronously using asyncio.to_thread + subprocess.run. | 7 | tools\implementations.py |
| 161 | `tool_sub_agent_caller` | Call Marcus  Derek/Victoria/Luna sub-agents and normalize their | 0 | - |
| 318 | `tool_file_writer_batch` | Write multiple files at once to a base path. | 0 | - |
| 343 | `tool_file_reader` | Read a single file. | 0 | - |
| 367 | `tool_file_deleter` | Delete a file or directory tree. | 0 | - |
| 390 | `tool_file_lister` | List files recursively or non-recursively. | 0 | - |
| 416 | `tool_code_viewer` | Return file contents with some metadata, used for in-UI preview. | 0 | - |
| 444 | `tool_bash_runner` | Run a shell command with timeout (async, non-blocking). | 0 | - |
| 459 | `tool_python_executor` | Execute a snippet of Python code in a temp file (async, non-blocking). | 0 | - |
| 482 | `tool_npm_runner` | Run an npm command, e.g. 'install', 'run build', etc. (async, non-blocking). | 0 | - |
| 500 | `tool_pytest_runner` | Run pytest in a given directory (async, non-blocking). | 0 | - |
| 520 | `tool_playwright_runner` | Run Playwright E2E tests (async, non-blocking). | 0 | - |
| 534 | `tool_test_generator` | Generate simple pytest or Playwright test template. | 0 | - |
| 570 | `tool_sandbox_exec` | Execute a command inside a sandbox container using real Python calls. | 1 | tools\implementations.py |
| 769 | `validate_deployment` | Validate both frontend and backend deployments. | 1 | tools\implementations.py |
| 809 | `tool_deployment_validator` | Tool wrapper for validate_deployment. | 0 | - |
| 826 | `tool_key_validator` | Check presence of important API keys. | 0 | - |
| 845 | `tool_cross_llm_validator` | Stub cross-LLM consistency validator (can be extended later). | 0 | - |
| 853 | `tool_syntax_validator` | Validate Python / basic JS/TS syntax. | 0 | - |
| 885 | `tool_ux_visualizer` | Take a Playwright screenshot of the frontend. | 0 | - |
| 911 | `tool_screenshot_comparer` | Compare two screenshots pixel-by-pixel. | 0 | - |
| 937 | `tool_api_tester` | Perform a simple HTTP API call (GET or POST). | 0 | - |
| 972 | `tool_web_researcher` | Basic stub for web research (no external API yet). | 0 | - |
| 983 | `tool_health_checker` | Hit a health endpoint and return status. | 0 | - |
| 1003 | `tool_user_confirmer` | Ask user a question (auto-answers with first option in non-interactive mode). | 0 | - |
| 1017 | `tool_user_prompter` | Prompt the user for input (returns default in non-interactive mode). | 0 | - |
| 1033 | `tool_db_schema_reader` | No description available | 0 | - |
| 1043 | `tool_db_query_runner` | No description available | 0 | - |
| 1058 | `tool_docker_builder` | Build a Docker image using docker CLI (async, non-blocking). | 0 | - |
| 1074 | `tool_vercel_deployer` | Deploy a project using `vercel --prod` (async, non-blocking). | 0 | - |
| 1089 | `tool_unified_patch_applier` | No description available | 0 | - |
| 1113 | `tool_json_patch_applier` | No description available | 0 | - |
| 1202 | `_run_tool_impl` | No description available | 1 | tools\registry.py |
| 1229 | `_validate_singleton` | No description available | 1 | tools\implementations.py |

## Module: `tools\patching.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 16 | `apply_unified_patch` | Apply a unified diff patch to the workspace. | 1 | tools\implementations.py |
| 41 | `_split_into_file_patches` | Split a full multi-file unified diff into file-level diffs. | 1 | tools\patching.py |
| 60 | `_apply_single_file_patch` | Apply unified diff to a single file. | 1 | tools\patching.py |
| 112 | `_apply_hunks` | Apply each @@ hunk to file content. | 1 | tools\patching.py |
| 163 | `PatchEngine.apply_patches` | Applies LLM patches (JSON-based) across multiple files. | 1 | tools\implementations.py |

## Module: `tools\registry.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 15 | `register_tools` | No description available | 1 | main.py |
| 20 | `get_tool` | No description available | 0 | - |
| 24 | `get_tools_for_step` | No description available | 1 | tools\tool_policy.py |
| 262 | `get_available_tools` | Return list of available tool names dynamically. | 0 | - |
| 267 | `run_tool` | Execute a tool by name. | 0 | - |
| 273 | `get_relevant_tools_for_query` | Select tools using V!=K Attention with strict Context constraints. | 1 | agents\sub_agents.py |
| 390 | `_get_standard_tools` | Return only the essential tools. | 3 | tools\registry.py |
| 398 | `_ensure_essentials` | Ensure essential tools are present in the list. | 1 | tools\registry.py |

## Module: `tools\tool_policy.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 13 | `filter_by_environment` | CHANGE I: Pre-filter tools by environment constraints. | 1 | tools\tool_policy.py |
| 58 | `allowed_tools_for_step` | Get allowed tools for a step, optionally filtered by environment. | 1 | tools\registry.py |

## Module: `tracking\memory.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 15 | `PersistentMemoryStore.__init__` | No description available | 0 | - |
| 23 | `PersistentMemoryStore._init_db` | Initialize SQLite database schema | 4 | learning\failure_store.py, learning\pattern_store.py (+2 more) |
| 48 | `PersistentMemoryStore.save_memory` | Save a memory entry | 1 | tracking\memory.py |
| 78 | `PersistentMemoryStore.recall_patterns` | Recall successful patterns for an agent/step | 1 | tracking\memory.py |
| 110 | `get_store` | No description available | 2 | tracking\memory.py |
| 118 | `remember_success` | Remember a successful pattern. | 1 | supervision\supervisor.py |
| 143 | `recall_patterns` | Recall successful patterns (convenience wrapper). | 1 | tracking\memory.py |
| 159 | `get_memory_hint` | Get a hint from memory to include in agent instructions. | 2 | agents\sub_agents.py, supervision\supervisor.py |

## Module: `tracking\metrics.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 11 | `update_code_metrics` | Update code metrics for generated files. | 0 | - |
| 43 | `get_code_metrics` | Get code metrics for a project. | 0 | - |

## Module: `tracking\quality.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 11 | `track_quality_score` | Track quality score for an agent. | 2 | supervision\supervisor.py |
| 27 | `get_quality_summary` | Get average quality scores per agent. | 0 | - |

## Module: `utils\component_copier.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 33 | `get_used_components` | Scan frontend source files for @/components/ui/* imports. | 1 | utils\component_copier.py |
| 69 | `get_all_required_components` | Expand component set to include dependencies. | 1 | utils\component_copier.py |
| 84 | `copy_used_components` | Copy only the used Shadcn components to the project. | 1 | handlers\frontend_mock.py |
| 144 | `copy_component_by_name` | Copy a single component by name (for on-demand copying). | 0 | - |

## Module: `utils\dependency_fixer.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 11 | `detect_missing_dependencies` | Parse pytest/pip error output to detect missing dependencies. | 1 | utils\dependency_fixer.py |
| 56 | `_module_to_package` | Convert Python module name to pip package name. | 2 | utils\dependency_fixer.py |
| 91 | `add_dependencies_to_requirements` | Add missing dependencies to requirements.txt. | 1 | utils\dependency_fixer.py |
| 170 | `auto_fix_backend_dependencies` | Automatically detect and fix missing backend dependencies. | 0 | - |

## Module: `utils\entity_classification.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 17 | `classify_entities_from_mock` | Dynamically classify entities from mock.js structure. | 1 | utils\entity_classification.py |
| 100 | `classify_entities_from_contracts` | Dynamically classify entities from contracts.md endpoint structure. | 1 | utils\entity_classification.py |
| 160 | `merge_classifications` | Merge classifications from multiple sources. | 1 | utils\entity_classification.py |
| 196 | `classify_project_entities` | Main entry point: Classify all entities in a project. | 1 | handlers\contracts.py |

## Module: `utils\entity_discovery.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 34 | `Field.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 55 | `Relationship.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 77 | `EntitySpec.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 89 | `EntitySpec.from_dict` | Create EntitySpec from dictionary. | 2 | utils\entity_discovery.py |
| 110 | `EntityPlan.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 118 | `EntityPlan.from_dict` | Create EntityPlan from dictionary. | 2 | utils\entity_discovery.py |
| 128 | `EntityPlan.save` | Save entity plan to JSON file. | 18 | api\deployment.py, handlers\contracts.py (+3 more) |
| 135 | `EntityPlan.load` | Load entity plan from JSON file. | 6 | handlers\backend.py, handlers\backend_models.py (+3 more) |
| 145 | `clear_discovery_cache` | Clear the entity discovery cache for a project. | 1 | handlers\contracts.py |
| 167 | `discover_primary_entity` | Discover the primary entity from project artifacts. | 17 | handlers\backend.py, handlers\contracts.py (+9 more) |
| 231 | `_extract_from_contracts` | Extract entity from contracts.md API endpoints. | 1 | utils\entity_discovery.py |
| 262 | `_extract_from_architecture` | No description available | 0 | - |
| 276 | `_extract_from_models` | Extract entity from models.py Document class definitions. | 1 | utils\entity_discovery.py |
| 310 | `extract_all_models_from_models_py` | Extract ALL Beanie Document model class names that ACTUALLY EXIST in models.py. | 12 | handlers\frontend_integration.py, handlers\testing_backend.py (+6 more) |
| 362 | `extract_document_models_only` | Extract ONLY aggregate Document models (excludes embedded BaseModel classes). | 1 | handlers\backend.py |
| 428 | `_extract_from_mock` | No description available | 0 | - |
| 443 | `_extract_from_routers` | No description available | 1 | utils\entity_discovery.py |
| 456 | `_extract_from_user_request` | No description available | 0 | - |
| 476 | `singularize` | Convert a plural word to singular form. | 16 | handlers\contracts.py, utils\entity_classification.py (+1 more) |
| 522 | `extract_entity_from_request` | Dynamically extract a potential entity name from the user request. | 5 | handlers\analysis.py, handlers\backend.py (+3 more) |
| 589 | `discover_db_function` | Discover the database initialization function name from database.py. | 2 | orchestration\self_healing_manager.py |
| 631 | `discover_routers` | No description available | 0 | - |
| 641 | `get_entity_plural` | Get the plural form of an entity name. | 9 | orchestration\contract_parser.py, orchestration\fallback_api_agent.py (+4 more) |
| 655 | `discover_all_entities` | Discover ALL entities from project artifacts or user request. | 1 | handlers\backend_models.py |
| 757 | `_extract_all_entities_from_contracts` | Parse contracts.md for ALL entities (from /api/{entity} endpoints). | 1 | utils\entity_discovery.py |
| 786 | `_extract_all_entities_from_architecture` | Parse architecture.md for ALL entities in 'Data Models' section. | 1 | utils\entity_discovery.py |
| 841 | `detect_relationships` | Detect relationships from contracts.md and architecture.md. | 0 | - |

## Module: `utils\integration_playbooks.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 46 | `apply_playbook` | Apply integration playbook to project | 0 | - |

## Module: `utils\parser.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 24 | `extract_files_from_pseudo_json` | Try to salvage file entries of the form: | 1 | utils\parser.py |
| 83 | `normalize_llm_output` | Universal parser that converts any LLM output (JSON, markdown, or plain code) | 7 | handlers\analysis.py, handlers\contracts.py (+3 more) |
| 106 | `_normalize_llm_output_inner` | Inner implementation without recursion guard. | 1 | utils\parser.py |
| 215 | `_attempt_force_repair` | Force-close brackets if JSON is truncated or incomplete. | 2 | utils\parser.py |
| 233 | `_find_json_object` | Isolates the outermost JSON object in the text. | 1 | utils\parser.py |
| 275 | `normalize_unicode_aggressively` | Comprehensive Unicode normalization - strips ALL non-ASCII to prevent syntax errors. | 2 | utils\parser.py, validation\syntax_validator.py |
| 330 | `sanitize_marcus_output` | Cleans and normalizes messy model output before JSON parsing. | 2 | supervision\supervisor.py, utils\parser.py |
| 362 | `validate_qa_report_shape` | Validates structure of QA report against TestReport type. | 1 | utils\parser.py |
| 397 | `log_api_error` | Logs API failures with provider and model context. | 0 | - |
| 406 | `_replace_newlines_outside_strings` | Replace newlines with spaces ONLY outside of JSON string literals. | 1 | utils\parser.py |
| 452 | `parse_json` | Production-grade JSON parser with multi-pass sanitization, repair, and salvage. | 3 | supervision\supervisor.py, utils\parser.py |
| 517 | `_fix_unterminated_strings` | Fix unterminated strings by finding the last open quote and closing it. | 1 | utils\parser.py |
| 562 | `_salvage_complete_functions` | Extract only complete function/class definitions from truncated Python code. | 2 | utils\parser.py |
| 657 | `_extract_partial_files` | Extract files array from partially broken JSON. | 1 | utils\parser.py |
| 814 | `parse_kenji` | Specialized parser for Kenji (QA agent) outputs. | 0 | - |

## Module: `utils\path_utils.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 19 | `get_project_path` | Get the absolute path to a project workspace. | 19 | api\projects.py, api\sandbox.py (+3 more) |
| 39 | `get_backend_path` | Get the backend directory path for a project. | 0 | - |
| 44 | `get_frontend_path` | Get the frontend directory path for a project. | 0 | - |
| 49 | `get_backend_app_path` | Get the backend app directory path for a project. | 0 | - |
| 54 | `get_routers_path` | Get the routers directory path for a project. | 0 | - |
| 59 | `get_models_path` | Get the models.py file path for a project. | 0 | - |
| 64 | `get_main_py_path` | Get the main.py file path for a project. | 0 | - |
| 69 | `get_contracts_path` | Get the contracts.md file path for a project. | 0 | - |
| 74 | `get_tests_path` | Get the backend tests directory path for a project. | 0 | - |
| 79 | `is_valid_project_path` | Check if a path is within the workspaces directory. | 0 | - |
| 93 | `ensure_project_directories` | Ensure all required project directories exist. | 0 | - |

## Module: `utils\regex_healer.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 30 | `TestRegexPatcher.__init__` | No description available | 0 | - |
| 64 | `TestRegexPatcher.analyze_failure` | Identify applicable fixes. | 0 | - |
| 72 | `TestRegexPatcher.attempt_healing` | Attempt to heal a failing test. | 0 | - |
| 93 | `TestRegexPatcher._fix_relative_url` | Fix page.goto('/') to use absolute URL. | 0 | - |
| 107 | `TestRegexPatcher._fix_visibility_timeout` | Increase timeout for visibility checks. | 0 | - |
| 116 | `TestRegexPatcher._fix_loading_assertion` | Remove flaky loading assertions. | 0 | - |
| 129 | `TestRegexPatcher._fix_connection_retry` | Add retry configuration. | 0 | - |
| 152 | `TestRegexPatcher._fix_strict_mode` | Add .first() to selectors hit by strict mode. | 0 | - |
| 166 | `TestRegexPatcher._fix_hidden_element` | Fix empty container visibility issues. | 0 | - |

## Module: `utils\test_scaffolding.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 10 | `create_robust_smoke_test` | Create a robust smoke test using the standard testing contract testids (ESM friendly). | 1 | utils\test_scaffolding.py |
| 58 | `extract_testids_from_project` | Extract all data-testid values from JSX/TSX files in the project. | 1 | utils\test_scaffolding.py |
| 90 | `create_matching_smoke_test` | Create a smoke test that checks for elements that ACTUALLY exist in the UI. | 1 | handlers\testing_frontend.py |
| 186 | `get_available_selectors` | Analyze the project to find all available selectors for testing. | 1 | handlers\testing_frontend.py |

## Module: `utils\ui_beautifier.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 12 | `beautify_frontend_files` | Post-process frontend files to ensure UI consistency. | 1 | persistence\writer.py |
| 68 | `_beautify_jsx` | Apply beautification rules to JSX content. | 1 | utils\ui_beautifier.py |
| 81 | `_normalize_spacing` | Normalize inconsistent spacing classes for consistency. | 1 | utils\ui_beautifier.py |
| 102 | `_ensure_page_testids` | Ensure required testids are present in page components. | 1 | utils\ui_beautifier.py |
| 145 | `ensure_page_shell` | Ensure page has standard shell wrapper classes. | 0 | - |

## Module: `validation\static_validator.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 30 | `StaticValidationEvidence.__init__` | No description available | 0 | - |
| 40 | `StaticValidationEvidence.to_dict` | Convert evidence to dictionary for aggregator. | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 73 | `StaticValidator.__init__` | No description available | 0 | - |
| 76 | `StaticValidator.validate_backend_step` | Collect evidence about backend implementation. | 2 | orchestration\fast_orchestrator.py |
| 143 | `StaticValidator.validate_frontend_step` | Collect evidence about frontend implementation. | 1 | orchestration\fast_orchestrator.py |
| 185 | `StaticValidator._analyze_python_file` | Analyze a Python file and collect evidence. | 4 | validation\static_validator.py |
| 236 | `StaticValidator.validate_testing_step` | Collect evidence about test files (without running them). | 0 | - |

## Module: `validation\syntax_validator.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 24 | `ValidationResult.__init__` | No description available | 0 | - |
| 36 | `ValidationResult.__bool__` | No description available | 0 | - |
| 39 | `ValidationResult.to_dict` | No description available | 10 | arbormind\t_am_operators.py, core\types.py (+4 more) |
| 52 | `assert_no_empty_defs` | Check for empty function/class definitions (only pass/docstring). | 1 | validation\syntax_validator.py |
| 78 | `check_undefined_names` | Check for undefined names in Python code (missing imports). | 1 | validation\syntax_validator.py |
| 212 | `validate_python_syntax` | Validate Python code using AST parsing. | 2 | persistence\validator.py, validation\syntax_validator.py |
| 353 | `validate_javascript_syntax` | Basic JavaScript/JSX validation without a full parser. | 1 | validation\syntax_validator.py |
| 459 | `check_duplicate_attributes` | Check for duplicate HTML/JSX attributes on the same element. | 1 | validation\syntax_validator.py |
| 503 | `validate_syntax` | Validate file syntax based on its extension. | 3 | orchestration\wiring_utils.py, persistence\writer.py (+1 more) |
| 557 | `validate_files_batch` | Validate a batch of files from LLM output. | 1 | validation\syntax_validator.py |
| 603 | `preflight_check` | Pre-flight validation gate for agent output. | 0 | - |

## Module: `workflow\__init__.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 8 | `__getattr__` | Lazy import to avoid circular dependencies. | 0 | - |

## Module: `workflow\engine.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 84 | `WorkflowEngine.__init__` | No description available | 0 | - |
| 104 | `WorkflowEngine.run` | Execute the workflow loop. | 7 | api\workspace.py, orchestration\fast_orchestrator.py (+1 more) |
| 181 | `WorkflowEngine._pause_workflow` | Pause the workflow for user input. | 1 | workflow\engine.py |
| 207 | `WorkflowEngine._complete_workflow` | Complete the workflow successfully. | 1 | workflow\engine.py |
| 223 | `WorkflowEngine._fail_workflow` | Handle workflow failure. | 1 | workflow\engine.py |
| 239 | `WorkflowEngine._cleanup` | Clean up workflow state atomically. | 1 | workflow\engine.py |
| 247 | `run_workflow` | Start a new workflow for a project. | 1 | workflow\engine.py |
| 449 | `autonomous_agent_workflow` | Backwards-compatible wrapper. | 0 | - |
| 461 | `resume_workflow` | Resume a paused workflow OR start a refine workflow for completed projects. | 0 | - |
| 523 | `resume_from_checkpoint_workflow` | Resume a workflow from saved checkpoint. | 1 | api\workspace.py |

## Module: `workflow\integration_example.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 17 | `example_workflow_completion` | Example: How to use outcome aggregation at end of workflow. | 1 | workflow\integration_example.py |
| 85 | `example_hard_failure_precedence` | Example: HARD_FAILURE in isolated step still fails workflow. | 1 | workflow\integration_example.py |

## Module: `workflow\outcome_aggregator.py`

| Line | Function Name | Purpose (Docstring) | Usage Count | Used In (Sample) |
|------|---------------|---------------------|-------------|------------------|
| 17 | `aggregate_workflow_outcome` | Aggregate step outcomes into workflow status. | 3 | orchestration\fast_orchestrator.py, workflow\integration_example.py |
| 94 | `should_continue_workflow` | Determine if workflow should continue to next step. | 0 | - |
| 120 | `format_degradation_summary` | Format degradation report for user-facing display. | 2 | orchestration\fast_orchestrator.py, workflow\integration_example.py |
