## API Contracts for Todo List App

This document outlines the data models and REST API endpoints for the Todo List application, ensuring seamless integration between the frontend and backend.

### 1. Data Models

#### Task
Represents a single task item in the todo list. The structure directly mirrors `frontend/src/data/mock.js`.

-   **id**: `string` (UUID, auto-generated by backend)
-   **title**: `string` (required)
-   **content**: `string` (required)
-   **status**: `string` (required, e.g., "To Do", "In Progress", "Completed")
-   **created_at**: `string` (ISO 8601 datetime string, auto-generated by backend)

### 2. REST API Endpoints

All backend API routes MUST be prefixed with `/api`.

#### 2.1. Get All Tasks
-   **Endpoint**: `GET /api/tasks`
-   **Description**: Retrieves a list of all tasks.
-   **Request**: No body.
    -   **Query Parameters (Optional)**:
        -   `page`: `integer` (default: 1)
        -   `limit`: `integer` (default: 10)
-   **Response**: `200 OK`
    ```json
    {
      "data": [
        {
          "id": "string",
          "title": "string",
          "content": "string",
          "status": "string",
          "created_at": "string"
        }
      ],
      "total": "number",
      "page": "number",
      "limit": "number"
    }
    ```

#### 2.2. Create New Task
-   **Endpoint**: `POST /api/tasks`
-   **Description**: Creates a new task.
-   **Request**: `application/json`
    ```json
    {
      "title": "string",
      "content": "string",
      "status": "string" 
    }
    ```
-   **Response**: `201 Created`
    ```json
    {
      "data": {
        "id": "string",
        "title": "string",
        "content": "string",
        "status": "string",
        "created_at": "string"
      }
    }
    ```

#### 2.3. Get Single Task
-   **Endpoint**: `GET /api/tasks/{id}`
-   **Description**: Retrieves a single task by its ID.
-   **Request**: No body.
-   **Response**: `200 OK`
    ```json
    {
      "data": {
        "id": "string",
        "title": "string",
        "content": "string",
        "status": "string",
        "created_at": "string"
      }
    }
    ```

#### 2.4. Update Task
-   **Endpoint**: `PUT /api/tasks/{id}`
-   **Description**: Updates an existing task by its ID. Partial updates are supported.
-   **Request**: `application/json`
    ```json
    {
      "title"?: "string",
      "content"?: "string",
      "status"?: "string"
    }
    ```
-   **Response**: `200 OK`
    ```json
    {
      "data": {
        "id": "string",
        "title": "string",
        "content": "string",
        "status": "string",
        "created_at": "string"
      }
    }
    ```

#### 2.5. Delete Task
-   **Endpoint**: `DELETE /api/tasks/{id}`
-   **Description**: Deletes a task by its ID.
-   **Request**: No body.
-   **Response**: `200 OK`
    ```json
    {
      "data": {
        "message": "Task deleted successfully",
        "id": "string"
      }
    }
    ```

### 3. Response & Error Format (MUST FOLLOW)

-   **Successful list responses**:
    -   `200 OK`
    -   Body:
        ```json
        {
          "data": [<Entity>],
          "total": number,
          "page": number,
          "limit": number
        }
        ```

-   **Successful single-item responses**:
    -   `200 OK` or `201 Created`
    -   Body:
        ```json
        { "data": <Entity> }
        ```

-   **Error responses**:
    -   `4xx` / `5xx`
    -   Body:
        ```json
        {
          "error": {
            "code": "<MACHINE_READABLE_CODE>",
            "message": "<Human readable message>",
            "details": "optional"
          }
        }
        ```

This format MUST be consistent across all endpoints.
Routers and tests will rely on it.

### 4. Integration Notes

-   **Frontend API Client**: The frontend will utilize a centralized API client (e.g., `frontend/src/lib/api.js`) to make requests to these endpoints. This client will abstract away the base URL (`import.meta.env.VITE_API_URL`).
-   **Mock Data Replacement**: The `mockTasks` and `mockTaskStats` from `frontend/src/data/mock.js` will be replaced by actual API calls to the defined endpoints.
    -   `Home.jsx` will fetch recent tasks and potentially task statistics from `/api/tasks`.
    -   `TasksPage.jsx` will fetch the full list of tasks from `/api/tasks`, and use `POST`, `PUT`, `DELETE` for task management.
-   **Error Handling**: The frontend API client should be designed to catch HTTP errors and parse the standardized error response body to display user-friendly messages.
-   **Data Transformation**: The frontend expects `id` as a string. The backend should ensure that any database IDs (e.g., MongoDB `_id` objects) are converted to string format before being sent in the API response.